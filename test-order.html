<!DOCTYPE html>
<html>
<head>
    <title>Cytoscape Node HTML Label Order Test</title>
    <script src="libs/cytoscape.min.js"></script>
    <script src="dist/cytoscape-node-html-label.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #cy {
            width: 100%;
            height: 400px;
            border: 1px solid #ccc;
            margin-bottom: 20px;
        }
        .test-label {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #ddd;
            border-radius: 3px;
            padding: 2px 5px;
            font-size: 12px;
            text-align: center;
        }
        .order-1 { background-color: #ffcccc; }
        .order-2 { background-color: #ccffcc; }
        .order-3 { background-color: #ccccff; }
    </style>
</head>
<body>
    <h1>Cytoscape Node HTML Label Order Test</h1>
    <p>This test demonstrates the new order feature. Labels should be ordered by their 'order' attribute.</p>
    
    <div id="cy"></div>
    
    <h3>Test Description:</h3>
    <ul>
        <li>Node 1: No order (should appear last)</li>
        <li>Node 2: Order 1 (should appear first) - Red background</li>
        <li>Node 3: Order 2 (should appear second) - Green background</li>
        <li>Node 4: Order 3 (should appear third) - Blue background</li>
    </ul>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var cy = cytoscape({
                container: document.getElementById('cy'),
                elements: [
                    // Nodes with different order values
                    { 
                        group: 'nodes', 
                        data: { id: 'node1', name: 'No Order', order: undefined }
                    },
                    { 
                        group: 'nodes', 
                        data: { id: 'node2', name: 'Order 1', order: 1 }
                    },
                    { 
                        group: 'nodes', 
                        data: { id: 'node3', name: 'Order 2', order: 2 }
                    },
                    { 
                        group: 'nodes', 
                        data: { id: 'node4', name: 'Order 3', order: 3 }
                    }
                ],
                style: [
                    {
                        selector: 'node',
                        style: {
                            'background-color': '#666',
                            'label': 'data(name)',
                            'width': 60,
                            'height': 60
                        }
                    }
                ],
                layout: {
                    name: 'grid',
                    cols: 4,
                    rows: 1,
                    padding: 50
                }
            });

            // Apply node HTML labels with order functionality
            cy.nodeHtmlLabel([
                {
                    query: 'node',
                    cssClass: 'test-label',
                    valign: 'bottom',
                    valignBox: 'top',
                    tpl: function(data) {
                        var orderClass = data.order ? 'order-' + data.order : '';
                        var orderText = data.order ? ' (Order: ' + data.order + ')' : ' (No Order)';
                        return '<div class="' + orderClass + '">' + 
                               data.name + orderText + 
                               '</div>';
                    }
                }
            ]);

            console.log('Cytoscape Node HTML Label Order test initialized');
        });
    </script>
</body>
</html>
